<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_7.0.xsd">

  <grid name="patient-grid" title="Patient" model="com.axelor.apps.healthcare.db.Patient">
    <field name="patientType"/>
    <field name="firstName"/>
    <field name="lastName"/>
    <field name="mobile"/>
    <field name="email"/>
    <field name="dateOfBirth"/>
    <field name="statusSelect"/>
  </grid>

  <form name="patient-form" title="Patient" model="com.axelor.apps.healthcare.db.Patient"
    width="large">
    <panel>
      <field name="patientType"/>
    </panel>
    <panel name="mainPanel">
      <panel name="imagePanel" colSpan="2">
        <field name="picture" showTitle="false" widget="Image" colSpan="12">
          <viewer>
            <![CDATA[
            		<>
     					{id && <Image src={$image('id', 'content')} style={{ width: "80%" }}></Image>}
     					{!id && _parent.partnerTypeSelect != 2 && <Image src="img/company-default.jpg" style={{ width: "80%" }}></Image>}
     					{!id && _parent.partnerTypeSelect == 2 && _parent.titleSelect == 1 && <Image src="img/partner-m-default.png" style={{ width: "80%" }}></Image>}
     					{!id && _parent.partnerTypeSelect == 2 && _parent.titleSelect == 2 && <Image src="img/partner-w-default.png" style={{ width: "80%" }}></Image>}
     					{!id && _parent.partnerTypeSelect == 2 && (_parent.titleSelect > 2 || !_parent.titleSelect) && <Image src="img/partner-default.png" style={{ width: "80%" }}></Image>}
					</>
					]]>
          </viewer>
        </field>
      </panel>
      <panel name="generalInfoPanel" colSpan="10">
        <field name="preferredPronoun" colSpan="3"/>
        <field name="firstName" colSpan="3"/>
        <field name="middleName" colSpan="3"/>
        <field name="lastName" colSpan="3"/>

        <field name="dateOfBirth" colSpan="3"/>
        <field name="mobile" colSpan="3" widget="phone" x-initial-country="US"/>
        <field name="phone" colSpan="3" widget="phone" x-initial-country="US"/>
        <field name="email" colSpan="3" widget="email"/>
      </panel>
    </panel>
    <panel-tabs name="mainPanelTab">
      <panel name="infoPanel" title="Information" colSpan="12"
        showIf="patientType == 'Normal'">
        <field name="statusSelect" colSpan="3"/>
        <field name="identificationNumber" colSpan="3"/>
        <field name="socialSecurityNumber" colSpan="3"/>
        <field name="chartNumber" colSpan="3"/>

        <field name="jobTitle" colSpan="3"/>
        <field name="employer" colSpan="3"/>
        <field name="creditType" colSpan="3"/>
        <field name="billingType" colSpan="3"/>


        <field name="birthSex" colSpan="3"/>
        <field name="genderIdenty" colSpan="3"/>
        <field name="bloodGroup" colSpan="3"/>
        <field name="referralReason" colSpan="3"/>

        <field name="icdCode" colSpan="3" canEdit="true" canNew="true"
          form-view="patient-icd-code-form" grid-view="patient-icd-code-grid"/>
        <field name="cptCode" colSpan="3" canEdit="true" canNew="true"
          form-view="patient-cpt-code-form" grid-view="patient-cpt-code-grid"/>
        <field name="notes" colSpan="3"/>
        <field name="reportPreference" colSpan="3"/>

        <spacer colSpan="9"/>
        <field name="patientDetails" colSpan="6"/>
      </panel>

      <panel name="infoPanel" title="Information" colSpan="12"
        showIf="patientType == 'Veterinary'">
        <field name="statusSelect" colSpan="3"/>
        <field name="emergencyContactName" colSpan="3"/>
        <field name="emergencyContactPhone" colSpan="3"/>
        <field name="practiceType" colSpan="3"/>

        <field name="preferredPaymentMethod" colSpan="3"/>
        <field name="insuranceProvider" colSpan="3"/>
        <field name="policyNumber" colSpan="3"/>
        <field name="lastVisitDate" colSpan="3"/>

        <spacer colSpan="12"/>
        <field name="ownerDetails" colSpan="6"/>
      </panel>
      <panel name="animalDetailPanel" title="Animal Detail" colSpan="12"
        showIf="patientType == 'Veterinary'">
        <panel-related field="animalDetail" colSpan="12"/>
      </panel>

      <panel name="addressPanel" title="Address/Contacts" colSpan="12"
        showIf="patientType != null">
        <panel-related field="patientAddress" colSpan="12"
          form-view="patient-address-form" grid-view="patient-address-grid"/>
        <spacer colSpan="12"/>
        <panel-related field="patientRelation" colSpan="12"
          form-view="patient-relation-form" grid-view="patient-relation-grid"/>
      </panel>

      <panel name="appointmentPanel" title="Appointment" colSpan="12"
        showIf="patientType != null">
        <panel-related field="patientAppointmentInfo" colSpan="12"/>
      </panel>

      <panel name="encounterPanel" title="Encounter" colSpan="12" showIf="patientType != null">
        <panel-related field="patientEncounter" colSpan="12"
          grid-view="patient-encounter-grid" form-view="patient-encounter-form"/>
      </panel>

      <panel name="medicalHistoryPanel" title="Medical History" colSpan="12"
        showIf="patientType == 'Normal'">
        <panel name="personalAndSocialHistoryPanel" title="Personal and Social History"
          colSpan="12">
          <field name="occupation"/>
          <field name="maritalStatus"/>
        </panel>
        <panel name="allergiesMedicalSurgicalHistoryPanel"
          title="Allergies, Medical and Surgical History" colSpan="12">
          <field name="allergies"/>
          <field name="medicalHistory"/>
          <field name="medication"/>
          <field name="surgicalHistory"/>
        </panel>
        <panel name="riskFactorsPanel" title="Risk Factors" colSpan="12">
          <field name="tobaccoConsumptionPast"/>
          <field name="tobaccoConsumptionPresent"/>
          <field name="alcoholConsumptionPast"/>
          <field name="alcoholConsumptionPresent"/>
          <spacer colSpan="12"/>
          <field name="occupationalHazardAndEnvironmentalFactors" widget="html"/>
          <field name="otherRiskFactors" widget="html"/>
        </panel>
      </panel>
      <panel name="insuranceBillingPanel" title="Insurance/Billing" colSpan="12"
        showIf="patientType != null">
        <panel-related field="insuranceInformation" colSpan="12"
          grid-view="patient-insurance-information-grid"
          form-view="patient-insurance-information-form"/>
        <panel-related field="providerInformation" colSpan="12"
          grid-view="patient-provider-information-grid"
          form-view="patient-provider-information-form"/>
        <panel-related field="billingInformation" colSpan="12"
          grid-view="patient-billing-information-grid" form-view="patient-billing-information-form"/>
      </panel>
    </panel-tabs>

    <panel sidebar="true">
      <field name="healthcarePractitioner"/>
      <field name="userAssignTo" title="Assign User"/>
      <field name="companyAssign" title="Associated To"/>
    </panel>

    <panel sidebar="true" title="Billing" name="">
      <field name="totalBilling"/>
      <field name="paymentCollected"/>
    </panel>

    <panel-mail name="mailsPanel">
      <mail-messages limit="4"/>
      <mail-followers/>
    </panel-mail>
  </form>
</object-views>
